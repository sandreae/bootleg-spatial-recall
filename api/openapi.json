{
    "openapi": "3.0.0",
    "info": {
      "title": "Bootleg Spatial Recall API",
      "version": "1.0.0",
      "description": "API endpoints for bootleg-spatial-audio, bootleg convolution reverb."
    },
    "paths": {
      "/api/impulses": {
        "get": {
          "tags": [
            "Impulses"
          ],
          "summary": "Get all impulses.",
          "description": "API endpoint that returns all stored impulses from the database.",
          "responses": {
            "200": {
              "description": "success",
              "content": {
                "application/json": {
                  "schema": {
                    "type": "object",
                    "properties": {
                      "status": {
                        "type": "string",
                        "example": "Success"
                      },
                      "results": {
                        "type": "integer",
                        "example": 1
                      },
                      "data": {
                        "type": "object",
                        "properties": {
                          "impulses": {
                            "type": "array",
                            "items": {
                              "$ref": "#/components/schemas/Impulse"
                            }
                          }
                        }
                      }
                    }
                  }
                }
              }
            }
          }
        },
        "post": {
          "tags": [
            "Impulses"
          ],
          "summary": "Post an impulse.",
          "description": "API endpoint to upload new impulses.",
          "requestBody": {
            "content": {
              "multipart/form-data": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "name": {
                      "type": "string",
                      "example": "M60 underpass"
                    },
                    "location": {
                      "type": "string",
                      "example": "Manchester"
                    },
                    "gpsLat": {
                      "type": "number",
                      "example": 53.435212
                    },
                    "gpsLon": {
                      "type": "number",
                      "example": -2.316901
                    },
                    "description": {
                      "type": "string",
                      "example": "Long reverb in M60 underpass."
                    },
                    "date": {
                      "type": "string",
                      "example": "2005-06-07T00:00:00.000Z"
                    },
                    "imageFile": {
                      "type": "string",
                      "format": "binary"
                    },
                    "audioFile": {
                      "type": "string",
                      "format": "binary"
                    }
                  },
                  "required": [
                    "name",
                    "location",
                    "description",
                    "date",
                    "imageFile",
                    "audioFile"
                  ]
                }
              }
            }
          },
          "responses": {
            "200": {
              "description": "Succesful",
              "content": {
                "application/json": {
                  "schema": {
                    "type": "object",
                    "properties": {
                      "status": {
                        "type": "string",
                        "example": "success"
                      },
                      "data": {
                        "type": "object",
                        "properties": {
                          "impulse": {
                            "$ref": "#/components/schemas/Impulse"
                          }
                        }
                      }
                    }
                  }
                }
              }
            },
            "500": {
              "description": "Failure",
              "content": {
                "application/json": {
                  "schema": {
                    "type": "object",
                    "properties": {
                      "status": {
                        "type": "string",
                        "example": "error"
                      },
                      "error": {
                        "type": "object",
                        "properties": {
                          "stringValue": {
                            "type": "string",
                            "example": "6035008a676ffc23ca7e408"
                          },
                          "kind": {
                            "type": "string",
                            "example": "ObjectId"
                          },
                          "value": {
                            "type": "string",
                            "example": "6035008a676ffc23ca7e408"
                          },
                          "path": {
                            "type": "string",
                            "example": "_id"
                          },
                          "reason": {
                            "type": "object",
                            "properties": {}
                          },
                          "statusCode": {
                            "type": "integer",
                            "format": "int32",
                            "example": "500"
                          },
                          "status": {
                            "type": "string",
                            "example": "error"
                          }
                        }
                      },
                      "message": {
                        "type": "string",
                        "example": "Long error message"
                      }
                    }
                  }
                }
              }
            }
          }
        }
      },
      "/api/impulses/{id}": {
        "get": {
          "tags": [
            "Impulses"
          ],
          "summary": "Get one impulse by ID.",
          "description": "API endpoint that returns impulses from the database by it's id.",
          "responses": {
            "200": {
              "description": "Succesful",
              "content": {
                "application/json": {
                  "schema": {
                    "type": "object",
                    "properties": {
                      "status": {
                        "type": "string",
                        "example": "success"
                      },
                      "data": {
                        "type": "object",
                        "properties": {
                          "impulse": {
                            "$ref": "#/components/schemas/Impulse"
                          }
                        }
                      }
                    }
                  }
                }
              }
            },
            "404": {
              "description": "Failure",
              "content": {
                "application/json": {
                  "schema": {
                    "type": "object",
                    "properties": {
                      "status": {
                        "type": "string",
                        "example": "fail"
                      },
                      "error": {
                        "type": "object",
                        "properties": {
                          "statusCode": {
                            "type": "integer",
                            "example": 404
                          },
                          "status": {
                            "type": "string",
                            "example": "fail"
                          },
                          "isOperational": {
                            "type": "boolean",
                            "example": true
                          }
                        }
                      },
                      "message": {
                        "type": "string",
                        "example": "No impulse found with that ID"
                      },
                      "stack": {
                        "type": "string",
                        "example": "Error: long error message"
                      }
                    }
                  }
                }
              }
            },
            "500": {
              "description": "Failure",
              "content": {
                "application/json": {
                  "schema": {
                    "type": "object",
                    "properties": {
                      "status": {
                        "type": "string",
                        "example": "error"
                      },
                      "error": {
                        "type": "object",
                        "properties": {
                          "stringValue": {
                            "type": "string",
                            "example": "6035008a676ffc23ca7e408"
                          },
                          "kind": {
                            "type": "string",
                            "example": "ObjectId"
                          },
                          "value": {
                            "type": "string",
                            "example": "6035008a676ffc23ca7e408"
                          },
                          "path": {
                            "type": "string",
                            "example": "_id"
                          },
                          "reason": {
                            "type": "object",
                            "properties": {}
                          },
                          "statusCode": {
                            "type": "integer",
                            "format": "int32",
                            "example": "500"
                          },
                          "status": {
                            "type": "string",
                            "example": "error"
                          }
                        }
                      },
                      "message": {
                        "type": "string",
                        "example": "Long error message"
                      }
                    }
                  }
                }
              }
            }
          },
          "parameters": [
            {
              "name": "id",
              "in": "path",
              "required": true,
              "schema": {
                "type": "array",
                "items": {
                  "type": "string"
                }
              },
              "description": "ID of impulse to use",
              "style": "simple"
            }
          ]
        }
      }
    },
    "components": {
      "schemas": {
        "Impulse": {
          "title": "impulse",
          "required": [
            "name",
            "date",
            "location",
            "description",
            "audioFile",
            "imageFile"
          ],
          "properties": {
            "name": {
              "type": "string"
            },
            "slug": {
              "type": "string"
            },
            "date": {
              "type": "string",
              "format": "date-time"
            },
            "location": {
              "type": "string"
            },
            "gpsLocation": {
              "type": "object",
              "properties": {}
            },
            "description": {
              "type": "string"
            },
            "audioFile": {
              "type": "string"
            },
            "imageFile": {
              "type": "string"
            },
            "_id": {
              "type": "string"
            },
            "updatedAt": {
              "type": "string",
              "format": "date-time"
            },
            "createdAt": {
              "type": "string",
              "format": "date-time"
            }
          },
          "example": {
            "_id": "60350154a0e30c25cddab650",
            "name": "M60 underpass",
            "location": "Manchester",
            "gpsLocation": {
              "latitidue": 53.435212,
              "longitude": -2.316901
            },
            "description": "Long reverb in M60 underpass.",
            "date": "2005-06-07T00:00:00.000Z",
            "imageFile": "https://bootleg-spatial-recall.fra1.digitaloceanspaces.com/1614086483666-impulse-new-impulse-10.jpeg",
            "audioFile": "https://bootleg-spatial-recall.fra1.digitaloceanspaces.com/1614086483666-impulse-new-impulse-10.wav",
            "createdAt": "2021-02-23T13:21:24.816Z",
            "updatedAt": "2021-02-23T13:21:24.816Z",
            "slug": "m60-underpass"
          }
        }
      }
    }
  }